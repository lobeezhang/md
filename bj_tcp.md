![image-20210310215142665](C:\Users\lbzhung\AppData\Roaming\Typora\typora-user-images\image-20210310215142665.png)

![image-20210310215249102](C:\Users\lbzhung\AppData\Roaming\Typora\typora-user-images\image-20210310215249102.png)

![image-20210310215320479](C:\Users\lbzhung\AppData\Roaming\Typora\typora-user-images\image-20210310215320479.png)

![img](E:\workLinux\image\20160311202637585)

![img](E:\workLinux\image\47893-20180705161755511-404646417.png)

![img](E:\workLinux\image\47893-20180705161826484-1635229865.png)

![img](E:\workLinux\image\20181201003428208.png)

TCP/IP 协议族的每一层的作用：

- 网络接口层： 负责将二进制流转换为数据帧， 并进行数据帧的发送和接收。 要注意的是数据帧是  独立的网络信息传输单元。

网络接口层实际上并不是因特网协议组中的一部分，但是它是数据包从一个设备的网络层传输到另外一个设备的网络层的方法。这个过程能够在网卡的**软件驱动程序中控制**，也可以在韧体或者专用芯片中控制。这将完成如添加报头准备发送、通过物理媒介实际发送这样一些数据链路功能。另一端，链路层将完成数据帧接收、去除报头并且将接收到的包传到网络层。



- 网络层： 负责点(路由节点)到点的传输， 将数据帧封装成 IP 数据报， 并运行必要的路由算法。
- 传输层： 负责端对端之间的通信会话连接和建立。 传输协议的选择根据数据传输方式而定。
- 应用层： 负责应用程序的网络访问， 这里通过端口号来识别各个不同的进程。  





 N层用户与N层协议之间传递的数据称为服务数据单元(SDU)



##### 数据帧（Frame)：

**数据链路层**，传递的单位是frame，就是数据链路层的协议数据单元，它包括三部分：

帧头：里面有mac地址，通过这个地址可以在底层的交换机这个层面里顺着网线找到你的计算机。
数据部分：ip数据包，意思是使用ip地址定位的一个数据包。
帧尾：其中，帧头和帧尾包含一些必要的控制信息，比如同步信息、地址信息、差错控制信息等；数据部分则包含网络层传下来的数据，比如ip数据包。

![image-20210311214029079](E:\workLinux\image\image-20210311214029079.png)

不同类型的以太网：采用的网络接口、传输介质不同，数据编码不同



##### 数据包(Packet)：

TCP/IP协议通信传输中的数据单位，处于网络层，在 局域网中，“包”是包含在“帧”里的。

packet是整个tcp ip通信协议里网络层的传输单位，也是最小的单位。一个ip包里有什么呢？跟帧一样，有着目的地的ip地址及其来源的ip地址和其他的校验信息。它也被称为头。那么还有什么呢？来自传输层托付给自己待传送的信息。这个信息会被分成多个ip数据包发送出去。所以网络层传递的是ip包，ip包里是待传输消息的一部分。



##### 数据报（Datagram)：

现在来到传输层了，传输层直接接受来自你的消息，小到你给朋友发个晚安，大到你给别人传递个文件，只要提供对方的ip地址（还有端口号），其它的都交给传输层帮助你实现。就很像你与快递公司的关系。一种发送前会先探路，保证送货到家的，这是tcp协议，另一种只管寄，不管是否查收的就是udp。

这两种协议都会在发送前把你的消息拆分成多个段来传输，因为一般会分成多段，所以也有叫**数据段（segment）**的，或者报文段。

udp英文就叫 user datagram protocol。所以数据报是啥，就是带地址的消息。

  有人说，局域网中传输的不是“帧”(Frame) 吗？

没错，但是TCP/IP协议是工作在OSI模型第三层(网络层)、第四层(传输层)上的，而帧是工作在第二层(数据链路层)。上一层的内容由下一层的内容来传输，所以在局域网中 “包”是包含在“帧 ”里的。



也就是数据链路层的传输单位叫frame，传送的数据其实是ip数据包。



数据链路层 ——data frame（mac）



解包

① 比特合并成字节，再将字节封装成帧。
② 进行拆封，先看帧尾再看帧头
③ 拆封，识别目的 IP 和协议号（核对计算机是否有该协议）
④ 核对序列号和端口号，对数据进行重组
⑤ 读取文件调用到内存
⑥ 转换成电脑识别的信息
⑦ 显示到用户窗口

